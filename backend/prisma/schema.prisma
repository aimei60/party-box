generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model admins {
  id                                            Int        @id @default(autoincrement())
  email                                         String     @unique
  password                                      String
  passwordResetTokenHash                        String?
  passwordResetExpiresAt                        DateTime?
  passwordResetUsedAt                           DateTime?
  mustChangePassword                            Boolean    @default(false)
  role                                          String?    @default("admin")
  created_at                                    DateTime?  @default(now()) @db.Timestamp(6)
  updated_at                                    DateTime?  @default(now()) @db.Timestamp(6)
  isActive                                      Boolean    @default(true)
  deletedAt                                     DateTime?
  products_products_created_by_admin_idToadmins products[] @relation("products_created_by_admin_idToadmins")
  products_products_updated_by_admin_idToadmins products[] @relation("products_updated_by_admin_idToadmins")
}

model product_images {
  id         Int       @id @default(autoincrement())
  product_id Int?
  url        String
  alt_text   String?
  sort_order Int?      @default(0)
  is_primary Boolean?  @default(false)
  created_at DateTime? @default(now()) @db.Timestamp(6)
  products   products? @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model products {
  id                                          Int              @id @default(autoincrement())
  title                                       String
  description                                 Json
  price                                       Int
  currency                                    String?          @default("GBP") @db.Char(3)
  active                                      Boolean?         @default(true)
  etsy_url                                    String?
  created_at                                  DateTime?        @default(now()) @db.Timestamp(6)
  updated_at                                  DateTime?        @default(now()) @db.Timestamp(6)
  created_by_admin_id                         Int?
  updated_by_admin_id                         Int?
  short_description                           String?
  product_images                              product_images[]
  admins_products_created_by_admin_idToadmins admins?          @relation("products_created_by_admin_idToadmins", fields: [created_by_admin_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  admins_products_updated_by_admin_idToadmins admins?          @relation("products_updated_by_admin_idToadmins", fields: [updated_by_admin_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model sanity_check {
  id   Int     @id @default(autoincrement())
  note String?
}
